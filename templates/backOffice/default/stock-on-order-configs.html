{block name="no-return-functions"}
    {$admin_current_location = 'modules'}
{/block}

{block name="main-content"}
    <div id="wrapper" class="container">

        {if $general_error}
            <div class="alert alert-danger">
                {$general_error}
            </div>
        {/if}

        <!-- Payment modules list -->
        <div class="general-block-decorator">
            <div class="table-responsive">
                <table class="table table-striped table-condensed" id="stock_on_order_config-table">
                    <caption class="clearfix">
                        {intl l="Select a payment module to configure" d='stockonorder'}
                    </caption>

                    <thead>
                        <tr>
                            <th>
                                {admin_sortable_header
                                current_order=$order
                                order='module_id'
                                reverse_order='module_id-reverse'
                                path={url path='/admin/module/StockOnOrder/stock_on_order_config' target='stock_on_order_config-table'}
                                label="{intl l='ID' d='stockonorder'}"
                                }
                            </th>
                            <th>
                                {admin_sortable_header
                                current_order=$order
                                order='module_id'
                                reverse_order='module_id-reverse'
                                path={url path='/admin/module/StockOnOrder/stock_on_order_config' target='stock_on_order_config-table'}
                                label="{intl l='Payment module' d='stockonorder'}"
                                }
                            </th>
                            <th>
                                {admin_sortable_header
                                current_order=$order
                                order='is_default'
                                reverse_order='is_default-reverse'
                                path={url path='/admin/module/StockOnOrder/stock_on_order_config' target='stock_on_order_config-table'}
                                label="{intl l='Behavior' d='stockonorder'}"
                                }
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        {loop type='module' name='payment-modules' module_type='3'}
                            <tr>
                                <td>
                                    {$ID}
                                </td>
                                <td>
                                    <a href="{url path='/admin/module/StockOnOrder/viewModule/%id' id=$ID}">{$CODE}</a>
                                </td>
                                <td>
                                    {ifloop rel='stock-on-order-config-list'}
                                        {loop type='stock-on-order-config' name='stock-on-order-config-list' module_id=$ID exclude_behavior='default' order=$order}{/loop}
                                        {intl l='modified' d='stockonorder'}
                                    {/ifloop}
                                    {elseloop rel='stock-on-order-config-list'}
                                        {intl l='default' d='stockonorder'}
                                    {/elseloop}
                                </td>
                            </tr>
                        {/loop}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{/block}
